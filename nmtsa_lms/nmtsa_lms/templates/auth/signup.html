{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Sign Up - NMTSA Learning" %}{% endblock %}

{% block content %}
<div style="max-width: 500px; margin: var(--spacing-2xl) auto; padding: var(--spacing-xl);">
  <div class="card">
    <div style="text-align: center; margin-bottom: var(--spacing-xl);">
      <h1 style="margin-bottom: var(--spacing-sm);">{% trans "Create Your Account" %}</h1>
      <p style="color: var(--text-secondary);">{% trans "Join NMTSA Learning and start your journey in neurologic music
        therapy education" %}</p>
    </div>

    <form method="post" action="/signup/">
      {% csrf_token %}

      <!-- Account Type Selection -->
      <div
        style="margin-bottom: var(--spacing-xl); padding: var(--spacing-lg); background: #E8F1F8; border-radius: 6px;">
        <label
          style="display: block; font-weight: 600; margin-bottom: var(--spacing-md); color: var(--text-primary);">{%
          trans "I am signing up as:" %}
          <span style="color: var(--color-error);" aria-label="required">*</span>
        </label>

        <div style="display: flex; flex-direction: column; gap: var(--spacing-sm);">
          <label
            style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-md); background: white; border: 2px solid var(--border-color); border-radius: 6px; cursor: pointer;">
            <input type="radio" name="account_type" value="student" required style="width: 20px; height: 20px;">
            <div>
              <strong>{% trans "Healthcare Professional / Family Member" %}</strong>
              <p style="margin: 0; font-size: calc(0.875rem * var(--font-scale)); color: var(--text-secondary);">{%
                trans "Learn about autism support and neurologic music therapy" %}</p>
            </div>
          </label>

          <label
            style="display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-md); background: white; border: 2px solid var(--border-color); border-radius: 6px; cursor: pointer;">
            <input type="radio" name="account_type" value="teacher" style="width: 20px; height: 20px;">
            <div>
              <strong>{% trans "Educator / Course Creator" %}</strong>
              <p style="margin: 0; font-size: calc(0.875rem * var(--font-scale)); color: var(--text-secondary);">{%
                trans "Create and share educational content" %}</p>
            </div>
          </label>
        </div>
      </div>

      <!-- Personal Information -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
        {% include 'components/form_field.html' with label=_('First Name') type='text' name='first_name' required=True
        autocomplete='given-name' %}

        {% include 'components/form_field.html' with label=_('Last Name') type='text' name='last_name' required=True
        autocomplete='family-name' %}
      </div>

      {% include 'components/form_field.html' with label=_('Email Address') type='email' name='email' required=True
      placeholder=_('your.email@example.com') autocomplete='email' help_text=_('We will send a verification email to
      this address') %}

      {% include 'components/form_field.html' with label=_('Password') type='password' name='password1' required=True
      autocomplete='new-password' help_text=_('Must be at least 8 characters long') %}

      {% include 'components/form_field.html' with label=_('Confirm Password') type='password' name='password2'
      required=True autocomplete='new-password' %}

      <!-- Terms Agreement -->
      <div style="margin-bottom: var(--spacing-lg); display: flex; align-items: start; gap: var(--spacing-sm);">
        <input type="checkbox" id="agree_terms" name="agree_terms" required
          style="width: 24px; height: 24px; cursor: pointer; margin-top: 2px;">
        <label for="agree_terms" style="cursor: pointer; margin: 0; font-size: calc(0.875rem * var(--font-scale));">{%
          blocktrans %}I agree to the <a href="/terms/" target="_blank">Terms of Service</a> and <a href="/privacy/"
            target="_blank">Privacy Policy</a>{% endblocktrans %}
          <span style="color: var(--color-error);" aria-label="required">*</span>
        </label>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">{% trans "Create My Account" %}</button>

      <!-- Divider -->
      <div style="margin: var(--spacing-xl) 0; text-align: center; color: var(--text-muted);">{% trans "or" %}</div>

      <!-- OAuth Signup (Auth0) -->
      <a href="/login/auth0/" class="btn btn-outline" style="width: 100%; text-decoration: none;">
        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24" style="margin-right: var(--spacing-sm);"
          aria-hidden="true">
          <path
            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
        </svg>
        {% trans "Sign Up with Single Sign-On" %}
      </a>
    </form>

    <!-- Helper Links -->
    <div
      style="margin-top: var(--spacing-xl); padding-top: var(--spacing-lg); border-top: 1px solid var(--border-color); text-align: center;">
      <p style="color: var(--text-secondary);">{% trans "Already have an account?" %}
        <a href="{% url 'login' %}" style="font-weight: 600;">{% trans "Login here" %}</a>
      </p>
    </div>
  </div>

  <!-- What Happens Next -->
  <div
    style="margin-top: var(--spacing-lg); padding: var(--spacing-lg); background: #EAF4EA; border-radius: 6px; border-left: 4px solid #A8C9A8;">
    <h3 style="margin-top: 0; font-size: calc(1.125rem * var(--font-scale));">{% trans "What happens next?" %}</h3>
    <ol style="margin: 0; padding-left: var(--spacing-lg); color: #3A5A3A;">
      <li style="margin-bottom: var(--spacing-sm);">{% trans "You will receive a verification email" %}</li>
      <li style="margin-bottom: var(--spacing-sm);">{% trans "Click the link in the email to verify your account" %}
      </li>
      <li style="margin-bottom: var(--spacing-sm);">{% trans "Login and start browsing courses" %}</li>
      <li>{% trans "Enroll in free or paid courses to begin learning" %}</li>
    </ol>
  </div>
</div>
{% endblock %}