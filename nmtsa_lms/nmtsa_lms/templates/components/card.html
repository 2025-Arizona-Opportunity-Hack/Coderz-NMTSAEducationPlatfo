{# Reusable Card Component - Responsive & Accessible
   Usage:
   {% include 'components/card.html' with title='Card Title' content='Card content' %}

   Parameters:
   - title: Card header title (optional)
   - content: Card body content (required)
   - footer: Card footer content (optional)
   - image: Image URL for card top (optional)
   - image_alt: Alt text for image (required if image provided)
   - variant: default|highlight|bordered|elevated (default: default)
   - clickable: true|false - Makes entire card clickable (default: false)
   - href: URL if clickable (optional)
   - aria_label: Custom ARIA label for the card (optional)
#}

{% if clickable and href %}
<a href="{{ href }}"
   class="block bg-[color:var(--bg-card)] border-2 border-[color:var(--border-color)] rounded-xl overflow-hidden hover:shadow-[var(--shadow-lg)] hover:border-[color:var(--primary)] focus:outline-none focus:ring-2 focus:ring-[color:var(--focus-ring)] focus:ring-offset-2
          {% if variant == 'highlight' %}border-[color:var(--primary)] bg-[color:var(--primary-light)]
          {% elif variant == 'elevated' %}shadow-[var(--shadow-md)]
          {% endif %}"
   {% if aria_label %}aria-label="{{ aria_label }}"{% else %}aria-label="{{ title }}"{% endif %}
   role="article">
    
    {% if image %}
    <div class="w-full h-48 overflow-hidden">
        <img src="{{ image }}" 
             alt="{{ image_alt|default:title|default:'Card image' }}" 
             class="w-full h-full object-cover"
             loading="lazy">
    </div>
    {% endif %}

    {% if title %}
    <div class="px-4 sm:px-6 py-4 border-b border-[color:var(--border-color)]">
        <h3 class="text-lg sm:text-xl font-bold text-[color:var(--text-primary)]">{{ title }}</h3>
    </div>
    {% endif %}

    <div class="px-4 sm:px-6 py-4 text-[color:var(--text-secondary)]">
        {{ content|safe }}
    </div>

    {% if footer %}
    <div class="px-4 sm:px-6 py-3 bg-[color:var(--bg-secondary)] border-t border-[color:var(--border-color)] text-sm">
        {{ footer|safe }}
    </div>
    {% endif %}
</a>
{% else %}
<article class="bg-[color:var(--bg-card)] border-2 border-[color:var(--border-color)] rounded-xl overflow-hidden
               {% if variant == 'highlight' %}border-[color:var(--primary)] bg-[color:var(--primary-light)]
               {% elif variant == 'elevated' %}shadow-[var(--shadow-md)]
               {% endif %}"
         {% if aria_label %}aria-label="{{ aria_label }}"{% elif title %}aria-labelledby="card-title-{{ title|slugify }}"{% endif %}
         role="article">
    
    {% if image %}
    <div class="w-full h-48 overflow-hidden">
        <img src="{{ image }}" 
             alt="{{ image_alt|default:title|default:'Card image' }}" 
             class="w-full h-full object-cover"
             loading="lazy">
    </div>
    {% endif %}

    {% if title %}
    <header class="px-4 sm:px-6 py-4 border-b border-[color:var(--border-color)]">
        <h3 id="card-title-{{ title|slugify }}" class="text-lg sm:text-xl font-bold text-[color:var(--text-primary)]">
            {{ title }}
        </h3>
    </header>
    {% endif %}

    <div class="px-4 sm:px-6 py-4 text-[color:var(--text-secondary)]">
        {{ content|safe }}
    </div>

    {% if footer %}
    <footer class="px-4 sm:px-6 py-3 bg-[color:var(--bg-secondary)] border-t border-[color:var(--border-color)] text-sm">
        {{ footer|safe }}
    </footer>
    {% endif %}
</article>
{% endif %}
