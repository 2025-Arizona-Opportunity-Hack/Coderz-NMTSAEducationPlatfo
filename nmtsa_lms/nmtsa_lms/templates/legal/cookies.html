{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Cookie Policy - NMTSA Learning" %}{% endblock %}

{% block content %}
<div class="min-h-screen bg-background py-12">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-4xl font-bold text-primary mb-4">{% trans "Cookie Policy" %}</h1>
      <p class="text-muted text-sm">{% trans "Last Updated: October 12, 2025" %}</p>
    </div>

    <!-- Content -->
    <div class="bg-card rounded-lg border-2 border-default p-6 sm:p-8 space-y-8">

      <!-- Introduction -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "1. What Are Cookies?" %}</h2>
        <p class="text-primary-text mb-4">
          {% trans "Cookies are small text files stored on your device (computer, smartphone, or tablet) when you visit
          a website. They help websites remember your preferences, login status, and other information to improve your
          experience." %}
        </p>
        <p class="text-primary-text">
          {% trans "NMTSA Learning uses cookies and similar technologies (such as local storage and session storage) to
          provide, secure, and improve our Learning Management System (LMS) platform." %}
        </p>
      </section>

      <!-- Types of Cookies -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "2. Types of Cookies We Use" %}</h2>

        <!-- Essential Cookies -->
        <div class="mb-6">
          <h3 class="text-xl font-semibold text-primary mb-3">{% trans "2.1 Essential Cookies (Required)" %}</h3>
          <p class="text-primary-text mb-3">
            {% trans "These cookies are necessary for the Platform to function and cannot be disabled. They enable core
            functionality such as:" %}
          </p>
          <ul class="list-disc pl-6 text-primary-text space-y-2 mb-3">
            <li><strong>{% trans "Authentication:" %}</strong> {% trans "Session cookies to keep you logged in (via
              Auth0)" %}</li>
            <li><strong>{% trans "Security:" %}</strong> {% trans "CSRF tokens to protect against cross-site request
              forgery" %}</li>
            <li><strong>{% trans "Load Balancing:" %}</strong> {% trans "Routing to the correct server" %}</li>
            <li><strong>{% trans "Form Data:" %}</strong> {% trans "Remembering information you entered in forms" %}
            </li>
          </ul>
          <div class="bg-background border-l-4 border-[color:var(--primary-hover)] p-4 mt-3">
            <p class="text-sm text-primary-text"><strong>{% trans "Note:" %}</strong> {% trans "Without these cookies,
              you cannot log in or access course content." %}</p>
          </div>
        </div>

        <!-- Functional Cookies -->
        <div class="mb-6">
          <h3 class="text-xl font-semibold text-primary mb-3">{% trans "2.2 Functional Cookies (Optional)" %}</h3>
          <p class="text-primary-text mb-3">
            {% trans "These cookies enhance your experience by remembering your preferences:" %}
          </p>
          <ul class="list-disc pl-6 text-primary-text space-y-2 mb-3">
            <li><strong>{% trans "Theme Preferences:" %}</strong> {% trans "Light, Dark, High Contrast, or Minimal mode"
              %}</li>
            <li><strong>{% trans "Font Size:" %}</strong> {% trans "Small, Medium, or Large text size" %}</li>
            <li><strong>{% trans "Language Settings:" %}</strong> {% trans "Preferred language (if applicable)" %}</li>
            <li><strong>{% trans "Video Progress:" %}</strong> {% trans "Resume playback from where you left off" %}
            </li>
            <li><strong>{% trans "Chat State:" %}</strong> {% trans "Whether the chat widget is open or closed" %}</li>
          </ul>
          <p class="text-primary-text text-sm">
            <em>{% trans "Storage Method:" %}</em> {% trans "These preferences are stored in your browser's" %}
            <code>localStorage</code> (e.g., <code>nmtsa-theme</code>, <code>nmtsa-font-size</code>).
          </p>
        </div>

        <!-- Analytics Cookies -->
        <div class="mb-6">
          <h3 class="text-xl font-semibold text-primary mb-3">{% trans "2.3 Analytics Cookies (Optional)" %}</h3>
          <p class="text-primary-text mb-3">
            {% trans "These cookies help us understand how users interact with the Platform to improve performance:" %}
          </p>
          <ul class="list-disc pl-6 text-primary-text space-y-2 mb-3">
            <li><strong>{% trans "Page Views:" %}</strong> {% trans "Which pages are visited most often" %}</li>
            <li><strong>{% trans "User Behavior:" %}</strong> {% trans "Navigation patterns and feature usage" %}</li>
            <li><strong>{% trans "Error Tracking:" %}</strong> {% trans "Technical issues and bugs" %}</li>
            <li><strong>{% trans "Course Analytics:" %}</strong> {% trans "Completion rates and popular courses" %}</li>
          </ul>
          <p class="text-primary-text text-sm">
            <em>{% trans "Third-Party Tools:" %}</em> {% trans "We may use Google Analytics or similar services. These
            tools collect anonymized data and do not personally identify you." %}
          </p>
        </div>

        <!-- Third-Party Cookies -->
        <div class="mb-6">
          <h3 class="text-xl font-semibold text-primary mb-3">{% trans "2.4 Third-Party Cookies" %}</h3>
          <p class="text-primary-text mb-3">
            {% trans "Some cookies are set by third-party services we use:" %}
          </p>
          <ul class="list-disc pl-6 text-primary-text space-y-2">
            <li><strong>{% trans "Auth0:" %}</strong> {% trans "Authentication and single sign-on (SSO) cookies" %}</li>
            <li><strong>{% trans "PayPal:" %}</strong> {% trans "Payment processing and fraud prevention" %}</li>
            <li><strong>{% trans "Supermemory AI:" %}</strong> {% trans "Chat functionality and personalized
              recommendations" %}</li>
            <li><strong>{% trans "Video Hosting:" %}</strong> {% trans "CDN cookies for video playback (if applicable)"
              %}</li>
          </ul>
          <p class="text-primary-text mt-3 text-sm">
            {% trans "These third parties have their own privacy policies. We recommend reviewing them:" %}
          </p>
          <ul class="list-disc pl-6 text-primary-text space-y-1 mt-2 text-sm">
            <li><a href="https://auth0.com/privacy" target="_blank" rel="noopener noreferrer"
                class="text-[color:var(--primary-hover)] hover:underline">{% trans "Auth0 Privacy Policy" %}</a></li>
            <li><a href="https://www.paypal.com/us/legalhub/privacy-full" target="_blank" rel="noopener noreferrer"
                class="text-[color:var(--primary-hover)] hover:underline">{% trans "PayPal Privacy Policy" %}</a></li>
          </ul>
        </div>
      </section>

      <!-- Cookie Details -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "3. Cookie Details" %}</h2>
        <p class="text-primary-text mb-4">{% trans "Below is a list of specific cookies used by NMTSA Learning:" %}</p>

        <div class="overflow-x-auto">
          <table class="w-full border-2 border-default rounded-lg overflow-hidden">
            <thead class="bg-secondary text-white">
              <tr>
                <th class="px-4 py-3 text-left">{% trans "Cookie Name" %}</th>
                <th class="px-4 py-3 text-left">{% trans "Purpose" %}</th>
                <th class="px-4 py-3 text-left">{% trans "Type" %}</th>
                <th class="px-4 py-3 text-left">{% trans "Duration" %}</th>
              </tr>
            </thead>
            <tbody class="text-primary-text">
              <tr class="border-b border-default">
                <td class="px-4 py-3"><code>sessionid</code></td>
                <td class="px-4 py-3">{% trans "User authentication (Django session)" %}</td>
                <td class="px-4 py-3">{% trans "Essential" %}</td>
                <td class="px-4 py-3">{% trans "2 weeks" %}</td>
              </tr>
              <tr class="border-b border-default">
                <td class="px-4 py-3"><code>csrftoken</code></td>
                <td class="px-4 py-3">{% trans "Security (CSRF protection)" %}</td>
                <td class="px-4 py-3">{% trans "Essential" %}</td>
                <td class="px-4 py-3">{% trans "1 year" %}</td>
              </tr>
              <tr class="border-b border-default">
                <td class="px-4 py-3"><code>nmtsa-theme</code></td>
                <td class="px-4 py-3">{% trans "Remember theme preference" %}</td>
                <td class="px-4 py-3">{% trans "Functional" %}</td>
                <td class="px-4 py-3">{% trans "Persistent" %}</td>
              </tr>
              <tr class="border-b border-default">
                <td class="px-4 py-3"><code>nmtsa-font-size</code></td>
                <td class="px-4 py-3">{% trans "Remember font size preference" %}</td>
                <td class="px-4 py-3">{% trans "Functional" %}</td>
                <td class="px-4 py-3">{% trans "Persistent" %}</td>
              </tr>
              <tr class="border-b border-default">
                <td class="px-4 py-3"><code>auth0_session</code></td>
                <td class="px-4 py-3">{% trans "OAuth authentication (Auth0)" %}</td>
                <td class="px-4 py-3">{% trans "Essential" %}</td>
                <td class="px-4 py-3">{% trans "Session" %}</td>
              </tr>
              <tr class="border-b border-default">
                <td class="px-4 py-3"><code>_ga</code></td>
                <td class="px-4 py-3">{% trans "Google Analytics (user tracking)" %}</td>
                <td class="px-4 py-3">{% trans "Analytics" %}</td>
                <td class="px-4 py-3">{% trans "2 years" %}</td>
              </tr>
              <tr>
                <td class="px-4 py-3"><code>_gid</code></td>
                <td class="px-4 py-3">{% trans "Google Analytics (session tracking)" %}</td>
                <td class="px-4 py-3">{% trans "Analytics" %}</td>
                <td class="px-4 py-3">{% trans "24 hours" %}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- How We Use Cookies -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "4. How We Use Cookies" %}</h2>
        <p class="text-primary-text mb-4">{% trans "We use cookies to:" %}</p>
        <ul class="list-disc pl-6 text-primary-text space-y-2">
          <li><strong>{% trans "Authenticate Users:" %}</strong> {% trans "Keep you logged in as you navigate the
            Platform" %}</li>
          <li><strong>{% trans "Remember Preferences:" %}</strong> {% trans "Store theme, font size, and display
            settings" %}</li>
          <li><strong>{% trans "Track Progress:" %}</strong> {% trans "Save your course progress and video positions" %}
          </li>
          <li><strong>{% trans "Improve Performance:" %}</strong> {% trans "Optimize page load times and reduce server
            load" %}</li>
          <li><strong>{% trans "Analyze Usage:" %}</strong> {% trans "Understand which features are most popular" %}
          </li>
          <li><strong>{% trans "Prevent Fraud:" %}</strong> {% trans "Detect suspicious activity and protect your
            account" %}</li>
          <li><strong>{% trans "Personalize Content:" %}</strong> {% trans "Recommend relevant courses based on your
            interests" %}</li>
        </ul>
      </section>

      <!-- Managing Cookies -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "5. Managing Your Cookie Preferences" %}</h2>

        <h3 class="text-xl font-semibold text-primary mb-3">{% trans "5.1 Browser Settings" %}</h3>
        <p class="text-primary-text mb-4">
          {% trans "Most browsers allow you to control cookies through their settings. You can:" %}
        </p>
        <ul class="list-disc pl-6 text-primary-text space-y-2 mb-4">
          <li>{% trans "View and delete existing cookies" %}</li>
          <li>{% trans "Block all cookies (not recommended)" %}</li>
          <li>{% trans "Block third-party cookies only" %}</li>
          <li>{% trans "Clear cookies when you close your browser" %}</li>
          <li>{% trans "Set cookie preferences per website" %}</li>
        </ul>
        <p class="text-primary-text mb-4">
          {% trans "Instructions for popular browsers:" %}
        </p>
        <ul class="list-disc pl-6 text-primary-text space-y-1 text-sm">
          <li><a href="https://support.google.com/chrome/answer/95647" target="_blank" rel="noopener noreferrer"
              class="text-[color:var(--primary-hover)] hover:underline">{% trans "Google Chrome" %}</a></li>
          <li><a href="https://support.mozilla.org/en-US/kb/enhanced-tracking-protection-firefox-desktop"
              target="_blank" rel="noopener noreferrer" class="text-[color:var(--primary-hover)] hover:underline">{%
              trans "Mozilla Firefox" %}</a></li>
          <li><a href="https://support.apple.com/guide/safari/manage-cookies-sfri11471/mac" target="_blank"
              rel="noopener noreferrer" class="text-[color:var(--primary-hover)] hover:underline">{% trans "Safari"
              %}</a></li>
          <li><a
              href="https://support.microsoft.com/en-us/microsoft-edge/delete-cookies-in-microsoft-edge-63947406-40ac-c3b8-57b9-2a946a29ae09"
              target="_blank" rel="noopener noreferrer" class="text-[color:var(--primary-hover)] hover:underline">{%
              trans "Microsoft Edge" %}</a></li>
        </ul>

        <h3 class="text-xl font-semibold text-primary mb-3 mt-6">{% trans "5.2 Impact of Disabling Cookies" %}</h3>
        <div class="bg-background border-l-4 border-secondary p-4">
          <p class="text-primary-text mb-2"><strong>{% trans "⚠️ Warning:" %}</strong> {% trans "Disabling cookies may
            affect Platform functionality:" %}</p>
          <ul class="list-disc pl-6 text-primary-text space-y-1 text-sm">
            <li>{% trans "You may not be able to log in or stay logged in" %}</li>
            <li>{% trans "Your preferences (theme, font size) will not be saved" %}</li>
            <li>{% trans "Video progress will not be tracked" %}</li>
            <li>{% trans "Some features may not work correctly" %}</li>
          </ul>
        </div>

        <h3 class="text-xl font-semibold text-primary mb-3 mt-6">{% trans "5.3 Opt-Out of Analytics" %}</h3>
        <p class="text-primary-text mb-3">
          {% trans "To opt out of Google Analytics tracking, you can:" %}
        </p>
        <ul class="list-disc pl-6 text-primary-text space-y-2">
          <li>{% trans "Install the Google Analytics Opt-out Browser Add-on" %}</li>
          <li>{% trans "Enable 'Do Not Track' in your browser settings" %}</li>
          <li>{% trans "Use privacy-focused browsers like Brave or DuckDuckGo" %}</li>
        </ul>
      </section>
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "6. Other Tracking Technologies" %}</h2>
        <p class="text-primary-text mb-4">
          {% trans "In addition to cookies, we use the following technologies:" %}
        </p>
        <ul class="list-disc pl-6 text-primary-text space-y-2">
          <li><strong>{% trans "Local Storage" %}:</strong> HTML5 local storage for theme preferences and settings (does
            not expire)</li>
          <li><strong>{% trans "Session Storage" %}:</strong> Temporary storage for form data (cleared when tab is
            closed)</li>
          <li><strong>{% trans "Web Beacons" %}:</strong> Small images in emails to track open rates (if applicable)
          </li>
          <li><strong>{% trans "ETags" %}:</strong> HTTP caching headers to improve performance</li>
        </ul>
      </section>

      <!-- Updates to Cookie Policy -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "7. Updates to This Cookie Policy" %}</h2>
        <p class="text-primary-text">
          {% trans "We may update this Cookie Policy from time to time to reflect changes in our practices or legal
          requirements. We will post the updated policy on this page with a new 'Last Updated' date. We encourage you to
          review this policy periodically." %}
        </p>
      </section>

      <!-- Contact Information -->
      <section>
        <h2 class="text-2xl font-bold text-primary mb-4">{% trans "8. Contact Us" %}</h2>
        <p class="text-primary-text mb-4">
          {% trans "If you have questions about our use of cookies, please contact us:" %}
        </p>
        <div class="bg-background border-2 border-default rounded-lg p-4 text-primary-text">
          <p><strong>{% trans "NMTSA Learning" %}</strong></p>
          <p>{% trans "Email:" %} <a href="mailto:privacy@nmtsalearning.org"
              class="text-[color:var(--primary-hover)] hover:underline">privacy@nmtsalearning.org</a></p>
          <p>{% trans "Support:" %} <a href="mailto:support@nmtsalearning.org"
              class="text-[color:var(--primary-hover)] hover:underline">support@nmtsalearning.org</a></p>
        </div>
      </section>

      <!-- Additional Resources -->
      <section class="bg-background rounded-lg p-4 border-2 border-default">
        <h3 class="text-lg font-semibold text-primary mb-3">{% trans "📚 Related Policies" %}</h3>
        <div class="flex flex-wrap gap-4">
          <a href="{% url 'privacy_policy' %}" class="text-[color:var(--primary-hover)] hover:underline">{% trans
            "Privacy Policy" %}</a>
          <a href="{% url 'terms_of_service' %}" class="text-[color:var(--primary-hover)] hover:underline">{% trans
            "Terms of Service" %}</a>
        </div>
      </section>

    </div>

    <!-- Back to Home -->
    <div class="mt-8 text-center">
      <a href="{% url 'landing' %}" class="inline-flex items-center text-[color:var(--primary-hover)] hover:underline">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        {% trans "Back to Home" %}
      </a>
    </div>
  </div>
</div>
{% endblock %}